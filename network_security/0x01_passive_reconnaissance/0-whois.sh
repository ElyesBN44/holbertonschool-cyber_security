#!/bin/bash
whois $1 | awk 'BEGIN{FS=":"} /^Registrant Name:/ {rname=substr($0,index($0,":")+2)} /^Registrant Organization:/ {rorg=substr($0,index($0,":")+2)} /^Registrant Street:/ {rstreet=substr($0,index($0,":")+2)" "} /^Registrant City:/ {rcity=substr($0,index($0,":")+2)} /^Registrant State\/Province:/ {rstate=substr($0,index($0,":")+2)} /^Registrant Postal Code:/ {rpostal=substr($0,index($0,":")+2)} /^Registrant Country:/ {rcountry=substr($0,index($0,":")+2)} /^Registrant Phone:/ && $0 !~ /Ext/ {rphone=substr($0,index($0,":")+2)} /^Registrant Phone Ext:/ {rphoneext=substr($0,index($0,":")+2)} /^Registrant Fax:/ && $0 !~ /Ext/ {rfax=substr($0,index($0,":")+2)} /^Registrant Fax Ext:/ {rfaxext=substr($0,index($0,":")+2)} /^Registrant Email:/ {remail=substr($0,index($0,":")+2)} /^Admin Name:/ {aname=substr($0,index($0,":")+2)} /^Admin Organization:/ {aorg=substr($0,index($0,":")+2)} /^Admin Street:/ {astreet=substr($0,index($0,":")+2)" "} /^Admin City:/ {acity=substr($0,index($0,":")+2)} /^Admin State\/Province:/ {astate=substr($0,index($0,":")+2)} /^Admin Postal Code:/ {apostal=substr($0,index($0,":")+2)} /^Admin Country:/ {acountry=substr($0,index($0,":")+2)} /^Admin Phone:/ && $0 !~ /Ext/ {aphone=substr($0,index($0,":")+2)} /^Admin Phone Ext:/ {aphoneext=substr($0,index($0,":")+2)} /^Admin Fax:/ && $0 !~ /Ext/ {afax=substr($0,index($0,":")+2)} /^Admin Fax Ext:/ {afaxext=substr($0,index($0,":")+2)} /^Admin Email:/ {aemail=substr($0,index($0,":")+2)} /^Tech Name:/ {tname=substr($0,index($0,":")+2)} /^Tech Organization:/ {torg=substr($0,index($0,":")+2)} /^Tech Street:/ {tstreet=substr($0,index($0,":")+2)" "} /^Tech City:/ {tcity=substr($0,index($0,":")+2)} /^Tech State\/Province:/ {tstate=substr($0,index($0,":")+2)} /^Tech Postal Code:/ {tpostal=substr($0,index($0,":")+2)} /^Tech Country:/ {tcountry=substr($0,index($0,":")+2)} /^Tech Phone:/ && $0 !~ /Ext/ {tphone=substr($0,index($0,":")+2)} /^Tech Phone Ext:/ {tphoneext=substr($0,index($0,":")+2)} /^Tech Fax:/ && $0 !~ /Ext/ {tfax=substr($0,index($0,":")+2)} /^Tech Fax Ext:/ {tfaxext=substr($0,index($0,":")+2)} /^Tech Email:/ {temail=substr($0,index($0,":")+2)} END{print "Registrant Name,"rname;print "Registrant Organization,"rorg;print "Registrant Street,"rstreet;print "Registrant City,"rcity;print "Registrant State/Province,"rstate;print "Registrant Postal Code,"rpostal;print "Registrant Country,"rcountry;print "Registrant Phone,"rphone;printf "Registrant Phone Ext:,%s\n",rphoneext;print "Registrant Fax,"rfax;printf "Registrant Fax Ext:,%s\n",rfaxext;print "Registrant Email,"remail;print "Admin Name,"aname;print "Admin Organization,"aorg;print "Admin Street,"astreet;print "Admin City,"acity;print "Admin State/Province,"astate;print "Admin Postal Code,"apostal;print "Admin Country,"acountry;print "Admin Phone,"aphone;printf "Admin Phone Ext:,%s\n",aphoneext;print "Admin Fax,"afax;printf "Admin Fax Ext:,%s\n",afaxext;print "Admin Email,"aemail;print "Tech Name,"tname;print "Tech Organization,"torg;print "Tech Street,"tstreet;print "Tech City,"tcity;print "Tech State/Province,"tstate;print "Tech Postal Code,"tpostal;print "Tech Country,"tcountry;print "Tech Phone,"tphone;printf "Tech Phone Ext:,%s\n",tphoneext;print "Tech Fax,"tfax;printf "Tech Fax Ext:,%s\n",tfaxext;printf "Tech Email,%s", temail}'